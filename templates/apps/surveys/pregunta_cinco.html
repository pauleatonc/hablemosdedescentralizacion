{% extends "base/base.html" %}
{% load static %}

{% block views %}
<section class="container">
  <div class="cols-12 my-5">
    <div class="row justify-content-center">
      <div class="col-md-6 mx-md-auto my-2">
        <div class=" col mw-75 d-flex flex-column justify-content-center align-items-center">
          <img src="{% static 'img/logo-descentralizacion.png' %}" class="w-75 mx-5 my-3 " />
        </div>
      </div>
      <div class="col-lg-12 d-flex justify-content-between my-2">
        <button type="button" class=" btn btn-pill-primary  text-nowrap"
          onclick="window.location.href='{% url 'surveys_app:consulta_datos_usuario' %}'"><i
            class="material-symbols-outlined">
            chevron_left
          </i>
          Ir atrás</button>
      </div>
      <div class="col-md-12 mx-5">
        <p class="h3 text-center my-3">Pregunta 5 de 5:</p>
        <div class="col-md-10 mx-md-auto my-5">
          <p class="font-level-5 text-justify ">Para finalizar, a partir de las <br
              class="d-none d-sm-block d-md-none "> respuestas dadas anteriormente,
          </p>
          <p class="font-level-5 text-justify">
            ¿qué tema, iniciativa o aspecto profundizaría o agregaría, considerando el vínculo entre descentralización y
            su
            vida personal y en comunidad?<br>
            <br>
            <strong>Responder esta pregunta es opcional.</strong>
          </p>
        </div>
      </div>
      <div class="col-md-10 mx-5 w-75  my-lg-5">
        <form method="post" class="form col-12' action=" {% url 'surveys_app:pregunta_cinco' %}">
          {% csrf_token %}

          {% if valor_guardado %}
          <!-- Muestra los valores guardados si ya contestó la encuesta -->
          <input type="text" name="valor" value="{{ valor_guardado }}" readonly>
          <button type="button"
            onclick="window.location.href='{% url 'surveys_app:enviar_formularios' %}'">Siguiente</button>
          {% else %}
          <!-- Muestra input para el formulario -->
          <div class="form-group">
            {{ form.label_tag }}
            {{ form.texto_respuesta }}
            <div style="text-align:right"><span id="message-word-count" style="color:gray">0 / 250 palabras.</span>
            </div>
            {{ form.errors }}
          </div>

          <!-- Trae todos los valores de los formularios previos para pasarlos al submit -->
          {% if pregunta_uno_data %}
          <input type="text" name="pregunta_uno_valor" value="{{ pregunta_uno_valor }}" readonly>
          {% endif %}
          {% if pregunta_dos_propuesta_1 %}
          <input type="text" name="pregunta_dos_propuesta_1" value="{{ pregunta_dos_propuesta_1 }}" readonly>
          {% endif %}
          {% if pregunta_dos_propuesta_2 %}
          <input type="text" name="pregunta_dos_propuesta_2" value="{{ pregunta_dos_propuesta_2 }}" readonly>
          {% endif %}
          {% if pregunta_dos_propuesta_3 %}
          <input type="text" name="pregunta_dos_propuesta_3" value="{{ pregunta_dos_propuesta_3 }}" readonly>
          {% endif %}
          {% if pregunta_dos_propuesta_4 %}
          <input type="text" name="pregunta_dos_propuesta_4" value="{{ pregunta_dos_propuesta_4 }}" readonly>
          {% endif %}

          <!-- Botón para el envío del formulario completo -->
          <div class="col-md-4 mx-auto">
            <p class="font-base text-md-center">Continua para guardar y enviar tus respuestas.</p>
            <button type="submit" class="btn btn-primary btn-lg btn-block">Enviar mis respuestas <i
                class="material-symbols-outlined px-3">
                arrow_forward_ios
              </i></button>
          </div>
          {% endif %}

        </form>
      </div>

    </div>
  </div>
</section>

{% endblock views %}