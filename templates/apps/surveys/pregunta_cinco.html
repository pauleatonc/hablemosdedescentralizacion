{% extends "base/base.html" %}
{% load static %}

{% block views %}
<section class="container">
  <div class="cols-12 my-0 mx-3">
    <div class="row justify-content-center">
      <div class="col-md-6 mx-md-auto my-2">
        {% include "components/desentralizacion_banner.html" %}
      </div>
      <div class="col-lg-9 d-flex justify-content-between my-2">
        <button type="button" class="btn btn-pill-primary  text-nowrap"
          onclick="window.location.href='{% url 'surveys_app:pregunta_cuatro' %}'"><i
            class="material-symbols-outlined">
            chevron_left
          </i>
          Ir atrás</button>
      </div>
      <div class="col-lg-10">
        <p class="font-level-1  text-center my-3">Pregunta 5 de 5:</p>
      </div>
      <div class='col-lg-9 my-2 mx-1'>
          <p class="font-level-5 mx-2">Para finalizar, a partir de las  respuestas dadas anteriormente,
          </p>
          <p class="font-level-5  mx-2">
            ¿qué tema, iniciativa o aspecto profundizaría o agregaría, considerando el vínculo entre descentralización y
            su
            vida personal y en comunidad?<br>
            <br>
            Responder esta pregunta es opcional.
          </p>
      </div>
      <div class="col-12 col-md-8 col-lg-9 mx-5 justify-content-center">
        <form method="post" class="form col-12" action=" {% url 'surveys_app:pregunta_cinco' %}">
          {% csrf_token %}

          <!-- Muestra input para el formulario -->
          <div class="form-group">
            {{ form.label_tag }}
            {{ form.texto_respuesta }}
            <div style="text-align:right"><span id="message-word-count" style="color:gray">0 / 250 palabras.</span>
            </div>
            {{ form.errors }}
          </div>

          <!-- Trae todos los valores de los formularios previos para pasarlos al submit -->
          {% if pregunta_uno_data %}
          <input type="text" name="pregunta_uno_valor" value="{{ pregunta_uno_valor }}" readonly>
          {% endif %}
          {% if pregunta_dos_propuesta_1 %}
          <input type="text" name="pregunta_dos_propuesta_1" value="{{ pregunta_dos_propuesta_1 }}" readonly>
          {% endif %}
          {% if pregunta_dos_propuesta_2 %}
          <input type="text" name="pregunta_dos_propuesta_2" value="{{ pregunta_dos_propuesta_2 }}" readonly>
          {% endif %}
          {% if pregunta_dos_propuesta_3 %}
          <input type="text" name="pregunta_dos_propuesta_3" value="{{ pregunta_dos_propuesta_3 }}" readonly>
          {% endif %}
          {% if pregunta_dos_propuesta_4 %}
          <input type="text" name="pregunta_dos_propuesta_4" value="{{ pregunta_dos_propuesta_4 }}" readonly>
          {% endif %}

          <!-- Botón para el envío del formulario completo -->
          <div class="d-flex flex-column my-3 px-0 align-content-center">
            <p class="font-level-6  text-md-center font-weight-light ">Continua para guardar y enviar tus respuestas.</p>
            <button type="submit" class="btn btn-primary btn-lg btn-block align-self-center col-md-6 text-nowrap">Enviar mis respuestas <i
                class="material-symbols-outlined px-2">
                arrow_forward_ios
              </i></button>
        </div>


        </form>
      </div>
      
    </div>
  </div>
</section>
<div class="my-3 col-md-12 mw-100 mx-0"">
{% include "components/logo_banner.html" %}
</div>

{% endblock views %}

{% block scripts %}

<script>
    function countWords() {
        const messageInput = document.getElementById("id_texto_respuesta");
        const wordCountElement = document.getElementById("message-word-count");

        const message = messageInput.value;
        const wordCount = message.trim().split(/\s+/).length;
        wordCountElement.textContent = `${wordCount} / 250 palabras.`;
    }

    // Agregamos el "event listener"
    document.getElementById("id_texto_respuesta").addEventListener('input', countWords);
</script>

{% endblock scripts %}