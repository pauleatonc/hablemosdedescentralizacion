{% extends "base/base.html" %}
{% load static %}
{% block views %}
<section class="container">
  <div class="cols-12 my-5  mx-3">
    <div class="row justify-content-center">
      <div class="col-md-6 mx-md-auto my-2">
        {% include "components/desentralizacion_banner.html" %}
      </div>
      <div class="col-lg-12 d-flex justify-content-between my-2">
        <button type="button" class=" btn btn-pill-primary  text-nowrap"
          onclick="window.location.href='{% url 'surveys_app:consulta_datos_usuario' %}'"><i
            class="material-symbols-outlined">
            chevron_left
          </i>
          Ir atrás</button>
        <button type="button" class="btn btn-pill-primary text-nowrap"
          onclick="window.location.href='{% url 'surveys_app:pregunta_dos' %}'">Siguiente <i
            class="material-symbols-outlined">
            chevron_right
          </i></button>
      </div>

      <div class="col-12 col-md-12">
        <p class="font-level-1  text-center my-3">Pregunta 1 de 5:</p>

        <p class="font-level-4 text-justify mx-2">¿Qué valor le otorgas a la descentralización en la cotidianeidad y en
          la calidad de
          vida de las personas?</p>
        <p class="font-level-6 text-justify mx-2">Responde desde tus propios conocimientos y experiencias.</p>
      </div>
      <div class="col-12 col-md-6 my-lg-5">
        <form id="pregunta-uno-form mx-3" method="post" action="{% url 'surveys_app:pregunta_uno' %}">
          {% csrf_token %}

          {% if valor_guardado %}
          <!-- Muestra los valores guardados si ya contestó la encuesta -->
          <input type="text" name="valor" value="{{ valor_guardado }}" readonly>
          <button type="button" onclick="window.location.href='{% url 'surveys_app:pregunta_dos' %}'">Impacto de la
            Descentralización</button>
          {% else %}
          <!-- Muestra input para el formulario -->
          {% for choice in form.valor.field.choices %}
          <div class="">
            <button class="btn btn-neutral btn-default-size text-primary border-primary bg-white  my-3 w-100"
              type="button" id="valor" value="{{ choice.0 }}"
              onclick="document.getElementById('id_valor').value = '{{ choice.0 }}'">{{ choice.1 }}</button>
          </div>
          {% endfor %}

          <!-- Muestra errores del campo valor -->
          {% if form.non_field_errors %}
          <!-- Muestra el mensaje de error específico -->
          <p>{{ form.non_field_errors }}</p>
          {% endif %}

          <!-- Campo oculto para almacenar el valor seleccionado -->
          <input type="hidden" id="id_valor" name="valor" value="">

          <!-- Botón para el envío del formulario completo -->
          <div class="my-4 mx-2">
            <p class="font-level-5 text-md-center font-weight-light ">Continúa con la siguiente pregunta sobre:</p>
            <button type="submit" id="enviar_button" class="btn btn-primary btn-lg btn-block">Impacto de la
              Descentralización <i class="material-symbols-outlined px-3">
                arrow_forward_ios
              </i></button>
          </div>
          {% endif %}

        </form>
      </div>
    </div>
  </section>
  <div class="my-3 col-md-12 mw-100 mx-0"">
    {% include "components/logo_banner.html" %}
  </div>
  
{% endblock views %}

{% block scripts %}
<script>

  // Cuando se selecciona un botón, deselecciona todos los demás

  document.querySelectorAll('.valor').forEach(function (element)
  {
    element.addEventListener('click', function (event)
    {
      document.querySelectorAll('.valor').forEach(function (otherElement)
      {
        otherElement.disabled = false;
      });
      event.target.disabled = true;
    });
  });

</script>

{% endblock scripts %}